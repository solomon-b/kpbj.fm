<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>kpbj.fm</title>
    <link rel="stylesheet" href="/assets/css/output.css">
  </head>
  <body class="relative font-body flex flex-col min-h-screen">
    <!-- Component: Header -->
    $HEADER

    <!-- Hero Section -->
    <main class="relative flex-grow flex flex-col items-center text-center">
      <a href="https://fccdata.org/?call=kpbj&amp;facid=&amp;city=&amp;state=&amp;ccode=1&amp;country=US">
        <img src="assets/img/range.png" />
      </a>

      <!-- Email Signup Form -->
      <section class="mt-12  text-center">
        <h3 class="text-2xl font-bold mb-4">Stay in the Loop</h3>


        <!-- Hidden iframe target -->
        <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

        <!-- Form -->
        <form action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfeM91iQ_A7ybaa070b8jiznHNRIJ_2JU0F7wJjo7vAvkS3tQ/formResponse"
              method="POST"
              target="hidden_iframe"
              onsubmit="handleSubmit(event)"
              class="w-full max-w-sm">
          <div class="flex items-center border-b border-gray-500 py-2">
            <input type="email"
                   name="entry.936311333"
                   required
                   placeholder="you@example.com"
                   aria-label="Email Address"
                   class="appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none" />
            <button type="submit"
                    id="subscribe-button"
                    class="px-3 py-2 text-xs font-medium text-center inline-flex items-center text-white bg-gray-700 rounded-md hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800">
              Subscribe
            </button>
          </div>
          <p id="form-confirmation" class="mt-2 text-green-700" style="display: none;">Thanks for subscribing!</p>
        </form>

      </section>
    </main>
    <script>
      function handleSubmit(event) {
        const form = event.target;
        const confirmation = form.querySelector('#form-confirmation');
        const button = form.querySelector('#subscribe-button');

        // Prevent multiple submissions
        button.disabled = true;
        button.innerText = 'Submitting...';

        setTimeout(() => {
          confirmation.style.display = 'block';
          form.reset();
          button.disabled = false;
          button.innerText = 'Subscribe';
        }, 500);
      }
    </script>

    <!-- Component: Footer -->
    $FOOTER
  </body>
</html>
