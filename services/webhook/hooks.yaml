- id: restart-icecast
  execute-command: '{{ getenv "RESTART_CMD" }}'
  command-working-directory: /
  pass-arguments-to-command:
    - source: string
      name: restart
    - source: string
      name: '{{ getenv "ICECAST_SERVICE" }}'
  trigger-rule:
    match:
      type: value
      value: '{{ getenv "WEBHOOK_SECRET" }}'
      parameter:
        source: header
        name: X-Webhook-Secret

- id: restart-liquidsoap
  execute-command: '{{ getenv "RESTART_CMD" }}'
  command-working-directory: /
  pass-arguments-to-command:
    - source: string
      name: restart
    - source: string
      name: '{{ getenv "LIQUIDSOAP_SERVICE" }}'
  trigger-rule:
    match:
      type: value
      value: '{{ getenv "WEBHOOK_SECRET" }}'
      parameter:
        source: header
        name: X-Webhook-Secret

- id: health
  execute-command: /bin/echo
  pass-arguments-to-command:
    - source: string
      name: ok
